<ul class="nav nav-tabs">
<li class="active"><a href="#settings" data-toggle="tab">Settings</a></li>
<li><a href="#info" data-toggle="tab">Info</a></li>
<li><a href="#manage" data-toggle="tab">Manage</a></li>
</ul>

<div class="tab-content" id="main-ui">
<div class="tab-pane active" id="settings">

<%= form_for(@user) do |f| %>

<h3><%= User.human_attribute_name :check_target %></h3>
<% @user.enums(:check_target).hash.each do |k, l| %>
<label>
<%= f.radio_button :check_target, k %>
<strong><%= l %></strong><br>
<p class="check-target-desc"><%= t ".check_target_descriptions.#{k}" %></p>
</label>
<% end %>
<p class="muted">In any case, all files will be ignored they has been modified over a week ago.</p>

<h3><%= User.human_attribute_name :check_interval %></h3>
<%= f.collection_select :check_interval, [2, 4, 6, 12, 24].map{|i| [i, "#{i} Hours"]}, :first, :last %>


<%= f.submit :class => 'btn btn-primary btn-large' %>
<% end %>
</div>


<div class="tab-pane" id="info">

<table>
<tr>
  <th><%= User.human_attribute_name :notify_email %></th>
  <td><%= @user.email %></td>
</tr>
<tr>
  <th><%= User.human_attribute_name :last_checked_at %></th>
  <td><%= @user.last_checked_at ? l(@user.last_checked_at) : '(None)' %></td>
</tr>
<tr>
  <th><%= User.human_attribute_name :last_notified_at %></th>
  <td><%= @user.last_notified_at ? l(@user.last_notified_at) : '(None)' %></td>
</tr>
</table>
</div>

<div class="tab-pane" id="manage">
<p class="well">
<%= link_to 'Reset check timestamp', reset_stamp_user_path(@user), :class => 'btn', :method => :put, :data => {:confirm => 'Are your sure reset timestamp?'} %>
  By resetting timestamp, you will get a notification for all unread files modified within a week. (Debug purpose)
</p>
<p class="well">
<% if current_user && (current_user.admin? || current_user.last_checked_at.to_i < (Time.now.to_i - 600)) %>
<%= link_to 'Check Now', check_user_path(@user), :class => 'btn', :method => :put %>
<% else %>
<a class="btn disabled">Check Now</a>
<% end %>
  Check and send notification immediately. (Debug purpose)
</p>
<p class="well">
<%= link_to 'Delete your account', user_path(@user), :class => 'btn btn-danger', :method => :delete, :data => {:confirm => 'Are your sure to delete your account on Google Drive Notifier?'} %>
  You can delete your account information on Google Drive Notifier. All settings will lost, and notification will stop completely.
</p>
</div>

</div>
